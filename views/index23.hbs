<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/output.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
    <title>Lets Buy!</title>
  </head>

  <body class="bg-gray-900">
    <header class="h-20 bg-gray-900 sticky top-0 z-10 shadow-gray-300 flex items-center justify-between space-x-5 border-b-2 rounded-sm border-gray-300">

      <div class="logo item-center static flex">
        <div class="relative h-20 w-40 content-center">
          <a href="/general/home">
            <img src="/images/logo.png" class="object-cover" alt="logo">
          </a>
        </div>
      </div>

      <form action="/general/home" method="get" class="search flex items-center space-x-5">
        <input type="hidden" name="page" value="{{currentPage}}">
        <div class="search relative sm:w-80 lg:w-140 xl:w-[30rem] 2xl:w-[40rem]">
          <input type="text" id="price" value="{{maxprice}}" name="price" class="w-full px-4 py-2 text-gray-300 border-2 bg-gray-900 border-gray-600 rounded-full focus:outline-none hover:ring-1 hover:ring-gray-300 focus:ring-0.8 focus:ring-gray-300 focus:border-gray-500" placeholder="Search Your Dream House by Price...!" required="required"/>
          <button type="submit" class="absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 hover:text-gray-300">
            <i class="fa-solid fa-magnifying-glass px-1"></i>
          </button>
        </div>
      </form>

      <div class="relative flex items-center space-x-6">
        <!-- Menu Button with Dropdown -->
        <div class="relative">
          <button id="menubutton" class="text-gray-300">
            <i class="fa-solid fa-bars text-2xl"></i>
          </button>
          <div id="menu" class="absolute right-0 w-48 bg-gray-800 text-white rounded-md shadow-lg hidden">
            <a href="/general/home" class="block px-4 py-2 hover:bg-gray-700">Home</a>
            <a href="/general/contact" class="block px-4 py-2 hover:bg-gray-700">Contact us</a>
          </div>
        </div>

        <!-- Logout Button -->
        <div class="relative">
          <a href="/auth/logout">
            <button class="transition-all duration-500 border border-red-600 bg-red-600 rounded-full h-10 w-32 text-sm text-gray-100 hover:bg-slate-100 hover:text-slate-950">
              Log Out!
            </button>
          </a>
        </div>
      </div>

    </header>

    {{!-- Main part of site --}}
    <div class="main-part flex items-center justify-center">
      <div class="grid grid-cols-[0.7fr,2fr,0.7fr] w-full h-full">

        {{!-- First section --}}
        <div></div>

        {{!-- Second section --}}
        <div class="p-4">
          {{#if error}}
            <div class="mb-4 text-red-500 text-center font-medium">
              {{error}}
            </div>
          {{/if}}
          {{#each data}}
            <div class="card flex flex-col md:flex-row my-10 h-auto w-full transition-all duration-500 border-2 border-gray-100-950 text-white hover:bg-slate-400 rounded-2xl p-2 gap-4">
              <!-- Image Section -->
              <div class="image h-48 md:h-full w-full md:w-1/3 relative overflow-hidden">
                <div class="slider flex transition-transform duration-500">
                  {{#each images}}
                    <img src="{{this}}" alt="property image" class="image object-cover w-full h-full">
                  {{/each}}
                </div>

                <button class="prev-btn absolute left-2 top-1/2 transform -translate-y-1/2 bg-gray-800 text-white px-2 py-1 rounded-md">&lt;</button>
                <button class="next-btn absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-800 text-white px-2 py-1 rounded-md">&gt;</button>
              </div>

              <!-- Text Content Section -->
              <a href="/property/home/{{this.id}}" class="w-full md:w-2/3">
                <div class="card-content text-lg font-medium flex flex-col my-3">
                  <strong>
                    <p>Price:{{price}}</p>
                  </strong>
                  <h2>{{title}}</h2>
                  <p>üìç{{displayAddress}}</p>
                  <p>üõèÔ∏è Bedrooms:
                    {{bedrooms}}, üöø Bathrooms:
                    {{bathrooms}}, üìê Size:
                    {{size}}
                    sqFt</p>
                </div>
              </a>
            </div>
          {{/each}}
        </div>

        {{!-- third seciiton --}}
        <div></div>
      </div>
    </div>

    <div class="pagination flex flex-row w-full h-20 justify-center items-center">
      {{#if (gt currentPage 1)}}
        <a href="/general/home?page={{subtract currentPage 1}}">
          <button class="border z-10 hover:text-gray-300 border-gray-300 bg-white text-gray-800 px-4 py-4 rounded-md hover:bg-gray-800 focus:ring-2 focus:ring-blue-500 focus:outline-none mx-2">
            Previous
          </button>
        </a>
      {{/if}}

      {{#each (range 1 totalPages)}}
        <a href="/general/home?page={{this}}">
          <button class="border z-10 hover:text-gray-300 border-gray-300 bg-white text-gray-800 px-4 py-4 rounded-md hover:bg-gray-800 focus:ring-2 focus:ring-blue-500 focus:outline-none mx-2" {{#if (eq this ../currentPage)}} style="font-weight: bold; background-color: #4a5568; color: white;" {{/if}}>
            {{this}}
          </button>
        </a>
      {{/each}}

      {{#if (lt currentPage totalPages)}}
        <a href="/general/home?page={{add currentPage 1}}">
          <button class="border z-10 hover:text-gray-300 border-gray-300 bg-white text-gray-800 px-4 py-4 rounded-md hover:bg-gray-800 focus:ring-2 focus:ring-blue-500 focus:outline-none mx-2">
            Next
          </button>
        </a>
      {{/if}}
    </div>

    {{!-- footerr here --}}
    <footer id="footer"  class="text-gray-300 py-8 mt-10 border-t-2 border-t-gray-300">
      <div class="container mx-auto px-6 lg:px-20">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left">

          <!-- About Section -->
          <div>
            <h2 class="text-xl font-bold text-white mb-3">About Us</h2>
            <p class="text-gray-400 text-sm">We provide the best real estate deals with top-notch services.</p>
          </div>

          <!-- Quick Links -->
          <div>
            <h2 class="text-xl font-bold text-white mb-3">Quick Links</h2>
            <ul class="text-gray-400 space-y-2">
              <li>
                <a href="/general/home" class="hover:text-white">Home</a>
              </li>
              <li>
                <a href="/general/contact" class="hover:text-white">About</a>
              </li>
              <li>
                <a href="/general/contact" class="hover:text-white">Contact</a>
              </li>
            </ul>
          </div>

          <!-- Social Media -->
          <div>
            <h2 class="text-xl font-bold text-white mb-3">Follow Us</h2>
            <div class="flex justify-center md:justify-start space-x-4">
              <a href="#" class="text-gray-400 hover:text-white">
                <i class="fa-brands fa-facebook text-xl"></i>
              </a>
              <a href="#" class="text-gray-400 hover:text-white">
                <i class="fa-brands fa-twitter text-xl"></i>
              </a>
              <a href="#" class="text-gray-400 hover:text-white">
                <i class="fa-brands fa-instagram text-xl"></i>
              </a>
            </div>
          </div>

        </div>

        <!-- Copyright -->
        <div class="border-t border-gray-700 mt-6 pt-4 text-center text-gray-500 text-sm">
          ¬© 2025 Your Company. All rights reserved.
        </div>
      </div>
    </footer>

    <script>
      const menubutton = document.getElementById("menubutton");
      const menu = document.getElementById("menu");

      menubutton.addEventListener("mouseenter", function () {
        menu.classList.remove("hidden");
      });

      menubutton.addEventListener("mouseleave", function (event) {
        if (!menu.contains(event.relatedTarget)) {
          menu.classList.add("hidden");
        }
      });

      menu.addEventListener("mouseleave", function () {
        
        menu.classList.add("hidden");
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const cards = document.querySelectorAll(".card");

        cards.forEach(function (card) {
          const slider = card.querySelector(".slider");
          const images = slider.querySelectorAll("img");
          const prevBtn = card.querySelector(".prev-btn");
          const nextBtn = card.querySelector(".next-btn");
          let currentIndex = 0;

          function showImage(index) {
            // Ensure the index is within the range of images
            if (index < 0) {
              currentIndex = images.length - 1;
            } else if (index >= images.length) {
              currentIndex = 0;
            } else {
              currentIndex = index;
            }

            const imageWidth = slider
              .querySelector('.image')
              .offsetWidth; // Calculate width dynamically
            slider.style.transform = `translateX(-${currentIndex * imageWidth}px)`;

          }

          // Event listeners for buttons
          prevBtn.addEventListener("click", function () {
            showImage(currentIndex - 1);
          });

          nextBtn.addEventListener("click", function () {
            showImage(currentIndex + 1);
          });

          // Initial display of the first image
          showImage(currentIndex);
        });
      });
    </script>
  </body>

</html>

<!-- Inline JavaScript to handle slider -->
